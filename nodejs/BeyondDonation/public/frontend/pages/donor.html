<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Donor</title>

    <!-- Bootstrap Core CSS -->
    <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="../vendor/metisMenu/metisMenu.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../dist/css/sb-admin-2.css" rel="stylesheet">

    <!-- Morris Charts CSS -->
    <link href="../vendor/morrisjs/morris.css" rel="stylesheet">

    <!-- DataTables CSS -->
    <!-- <link href="../vendor/datatables-plugins/dataTables.bootstrap.css" rel="stylesheet">


    <!-- DataTables Responsive CSS -->
    <!--link href="../vendor/datatables-responsive/dataTables.responsive.css" rel="stylesheet"> -->

    <link href="http://cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css" rel = "stylesheet" />

    <!-- Custom Fonts -->
    <link href="../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0" id = "navbar">

        </nav>

        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">Donors</h1>
                </div>
            </div>
            <div class="row">
              <div class="col-lg-12 ">
                  <button class="btn btn-primary pull-right" data-toggle="modal" onclick="addRow()">
                    <b>Add Donor</b>
                  </button>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-12">
                <div class="panel panel-default">
                  <div class="panel-heading"> List of Donors </div>
                    <div class="panel-body">
                      <table width="100%" class="table table-striped table-bordered table-hover" id="donor-table">
                        <thead>
                          <tr>
                            <th>Sno</th>
                            <th>Name</th>
                            <th>Gender</th>
                            <th>DOB</th>
                            <th>DOA</th>
                            <th>Address</th>
                            <th>Mobile</th>
                            <th>Buttons</th>
                          </tr>
                        </thead>
                        <tbody id = "tbody">
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="edit-modal" tabindex="-1" role="dialog" aria-labelledby="edit-modal-label">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <form class="form-horizontal" id="edit-form">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                  <h4 class="modal-title" id="edit-modal-label">Edit Donor Details</h4>
                </div>
                <div class="modal-body">
                  <input type="hidden" id="edit-id" value="" class="hidden">
                  <div class="form-group">
                    <label for="name" class="col-sm-2 control-label">Name</label>
                    <div class="col-sm-10">
                      <input type="text" class="form-control" id="name"
                        name="name" placeholder="Donor Name" required>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="gender" class="col-sm-2 control-label">Gender</label>
                    <div class="col-sm-10">
                      <select class="form-control" id="gender" name="gender"
                        placeholder="Gender" required>
                        <option selected="selected">Male</option>
                        <option>Female</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="dob" class="col-sm-2 control-label">DOB</label>
                    <div class="col-sm-10">
                      <input type="date" class="form-control" id="dob"
                        name="dob" placeholder="Date of birth" required>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="doa" class="col-sm-2 control-label">DOA</label>
                    <div class="col-sm-10">
                      <input type="date" class="form-control" id="doa"
                        name="doa" placeholder="Date of Anninversary">
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="address" class="col-sm-2 control-label">Address</label>
                    <div class="col-sm-10">
                      <input type="text" class="form-control" id="address"
                        name="address" placeholder="Address" required>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="mobile" class="col-sm-2 control-label">Mobile</label>
                    <div class="col-sm-10">
                      <input type="text" class="form-control" id="mobile"
                        name="mobile" placeholder="Mobile Number" required>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default"
                    data-dismiss="modal">Close</button>
                  <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
              </form>
            </div>
          </div>
        </div>


        <div class="modal fade" id="add-modal" tabindex="-1" role="dialog"
          aria-labelledby="add-modal-label">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <form class="form-horizontal" id="add-form">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal"
                    aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                  <h4 class="modal-title" id="add-modal-label">Add New Donor</h4>
                </div>
                <div class="modal-body">
                  <div class="form-group">
                    <label for="add-name" class="col-sm-2 control-label">Name</label>
                    <div class="col-sm-10">
                      <input type="text" class="form-control" id="add-name"
                        name="name" placeholder="Donor Name" required>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="add-gender" class="col-sm-2 control-label">Gender</label>
                    <div class="col-sm-10">
                      <select class="form-control" id="add-gender" name="gender"
                        placeholder="Gender" required>
                        <option selected="selected">Male</option>
                        <option>Female</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="add-dob" class="col-sm-2 control-label">DOB</label>
                    <div class="col-sm-10">
                      <input type="date" class="form-control" id="add-dob"
                        name="dob" placeholder="Date of birth" requied>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="add-doa" class="col-sm-2 control-label">DOA</label>
                    <div class="col-sm-10">
                      <input type="date" class="form-control" id="add-doa"
                        name="doa" placeholder="Date of Anninversary">
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="add-address" class="col-sm-2 control-label">Address</label>
                    <div class="col-sm-10">
                      <input type="text" class="form-control" id="add-address"
                        name="address" placeholder="Address" required>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="add-mobile" class="col-sm-2 control-label">Mobile</label>
                    <div class="col-sm-10">
                      <input type="text" class="form-control" id="add-mobile"
                        name="mobile" placeholder="Mobile" required>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default"
                    data-dismiss="modal">Close</button>
                  <button type="submit" class="btn btn-primary">Add Donor</button>
                </div>
              </form>
            </div>
          </div>
        </div>

    <!-- jQuery -->
    <script src="../vendor/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="../vendor/metisMenu/metisMenu.min.js"></script>

    <!-- DataTables JavaScript -->
    <script src = "http://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js" />
    <!-- <script src=""></script>
    <script src="../vendor/datatables-plugins/dataTables.bootstrap.min.js"></script>
    <script src="../vendor/datatables-responsive/dataTables.responsive.js"></script> -->

    <script src="../dist/js/sb-admin-2.js"></script>

    <script
		src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.js"></script>

    <script type="text/javascript" language="javascript" class="init">
      var oldDonorDetails;
      $(document).ready(function() {

          loadTable();

          $("#navbar").load("navbar.html");

          $(function() {
            if (!Modernizr.inputtypes.date) {
              $('input[type=date]').datepicker({
                dateFormat : 'yy-mm-dd'
              });
            }
          });

          $("#edit-form").on("submit", function(event) {
              event.preventDefault();

              var name = $("#name").val();
              var gender = $("#gender").val();
              var dob = $("#dob").val();
              var doa = $("#doa").val();
              var address = $("#address").val();
              var mobile = $("#mobile").val();

              $("#edit-modal").modal('hide');
              editDonor(name, gender, dob, doa, address, mobile);
          });

                // Add new row
          $("#add-form").on("submit", function(event) {
              event.preventDefault();

              var name = $("#add-name").val();
              var gender = $("#add-gender").val();
              var dob = $("#add-dob").val();
              var doa = $("#add-doa").val();
              var address = $("#add-address").val();
              var mobile = $("#add-mobile").val();

              $("#add-modal").modal('hide');
              addDonor(name, gender, dob, doa, address, mobile);
            });
      });

      function addRow() {
        $("#add-modal").modal('show');
      }

      // Edit row
      function editRow(id) {

        var tds = document.getElementById(id).children;
        var old_name = tds[1].innerHTML;
        var old_gender = tds[2].innerHTML;
        var old_dob = tds[3].innerHTML;
        var old_doa = tds[4].innerHTML
        var old_address = tds[5].innerHTML;
        var old_mobile = tds[6].innerHTML;


        console.log(old_name + " " + old_gender + " " + old_dob + " " + old_doa + " " + old_address + " " + old_mobile);

        $("#edit-modal").modal('show');

        $("#name").val(old_name);
        $("#gender").val(old_gender);
        $("#dob").val(old_dob);
        $("#doa").val(old_doa);
        $("#address").val(old_address);
        $("#mobile").val(old_mobile);

        //TODO Check what to do with this data
      }

      function removeRow(id) {

        var tds = document.getElementById(id).children;
        var name = tds[1].innerHTML;
        var gender = tds[2].innerHTML;
        var dob = tds[3].innerHTML;
        var doa = tds[4].innerHTML
        var address = tds[5].innerHTML;
        var mobile = tds[6].innerHTML;

        console.log(name + " " + gender + " " + dob + " " + doa + " " + address + " " + mobile);

        var decision = confirm("Do you want to delete?");
        if (decision == true) {
          removeDonor(name, gender, dob, doa, address, mobile);
        }
      }

      function loadTable() {
        $('#tbody').html("");
        //TODO Make Ajax Call
        for(var i = 1; i < 11; i++) {
        $('#tbody').append(
            '<tr id = "' +  i+ '"><td>' + i
                + '</td><td>' + "Vivek" + i + '</td><td>'
                + 'Male' + '</td><td>'
                + '2016-11-11'+ '</td><td>'
                + '2016-11-11'+ '</td><td>'
                + "Vivek" + '</td><td>'
                + 123456789 + '</td><td><a data-id="row-' + i
                + '" href="javascript:editRow(' + i
                + ');" class="btn btn-warning btn-sm btn-block">Edit</a><a href="javascript:removeRow(' + i + ');" class="btn btn-danger btn-sm btn-block">Delete</a></td></tr>');
            }

            $('#donor-table').DataTable({
                responsive: true
            });
          }



      function editDonor(name, gender, dob, doa, address, mobile) {
        //TODO Make AJAX Call
        console.log(name + " " + gender + " " + dob + " " + doa + " " + address + " " + mobile);
        $("#edit-modal").modal('hide');
      }

      function addDonor(name, gender, dob, doa, address, mobile) {
        //TODO Make AJAX Call
        console.log(name + " " + gender + " " + dob + " " + doa + " " + address + " " + mobile);
        $("#add-modal").modal('hide');
      }

      function removeDonor(name, gender, dob, doa, address, mobile) {
        console.log(name + " " + gender + " " + dob + " " + doa + " " + address + " " + mobile);
        //TODO Make AJAX Call
      }
      </script>


    </script>

</body>

</html>
